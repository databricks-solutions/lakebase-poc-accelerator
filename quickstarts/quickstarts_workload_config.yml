# Example Lakebase Postgres Workload Configuration
# This is an example configuration for a medium-sized e-commerce application

# Database Instance Unit Configuration
database_instance:
  # Bulk writes for initial data loading and batch updates
  bulk_writes_per_second: 5000
  
  # Continuous writes for real-time order processing
  continuous_writes_per_second: 2000
  
  # Read operations for customer lookups, product searches
  reads_per_second: 8000
  
  # Read replicas for analytics and reporting
  number_of_readable_secondaries: 2
  readable_secondary_size_cu: 2

  # Lakebase Promotion percentage
  promotion_percentage: 50.0

# Database Storage Configuration
database_storage:
  # Total data size including all tables and indexes
  data_stored_gb: 250
  
  # Daily data cleanup (archived orders, expired sessions)
  estimated_data_deleted_daily_gb: 5
  
  # Restore windows for data recovery (days)
  restore_windows_days: 7

# Delta Synchronization Configuration
delta_synchronization:
  # Real-time sync (continuous pipelines)
  number_of_continuous_pipelines: 2
  
  # Batch sync (triggered/snapshot pipelines)
  expected_data_per_sync_gb: 20
  
  sync_mode: SNAPSHOT # SNAPSHOT or TRIGGERED
  
  # Run batch sync
  sync_frequency: "Per day"
  
  # TPC-DS tables to sync for OLTP workload with primary keys
  # Sync mode can be TRIGGERED, SNAPSHOT, or CONTINUOUS
  tables_to_sync:
    - name: samples.tpcds_sf1.customer
      primary_keys: [c_customer_sk]
      scheduling_policy: SNAPSHOT
    - name: samples.tpcds_sf1.customer_address
      primary_keys: [ca_address_sk]
      scheduling_policy: SNAPSHOT
    - name: samples.tpcds_sf1.customer_demographics
      primary_keys: [cd_demo_sk]
      scheduling_policy: SNAPSHOT
    - name: samples.tpcds_sf1.store_sales
      primary_keys: [ss_item_sk, ss_ticket_number]
      scheduling_policy: SNAPSHOT
    - name: samples.tpcds_sf1.item
      primary_keys: [i_item_sk]
      scheduling_policy: SNAPSHOT
    - name: samples.tpcds_sf1.date_dim
      primary_keys: [d_date_sk]
      scheduling_policy: SNAPSHOT
    - name: samples.tpcds_sf1.store
      primary_keys: [s_store_sk]
      scheduling_policy: SNAPSHOT
    - name: samples.tpcds_sf1.inventory
      primary_keys: [inv_date_sk, inv_item_sk, inv_warehouse_sk]
      scheduling_policy: SNAPSHOT
    - name: samples.tpcds_sf1.warehouse
      primary_keys: [w_warehouse_sk]
      scheduling_policy: SNAPSHOT
    - name: samples.tpcds_sf1.promotion
      primary_keys: [p_promo_sk]
      scheduling_policy: SNAPSHOT